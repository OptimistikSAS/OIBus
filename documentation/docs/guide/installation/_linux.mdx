import CodeBlock from '@theme/CodeBlock';
import DownloadButton from '../../../src/components/DownloadButton';
import packageInfo from '../../../package.json';

## Download

<div style={{ display: 'flex', justifyContent: 'space-around' }}>
  <DownloadButton
    link={`https://github.com/OptimistikSAS/OIBus/releases/download/v${packageInfo.version}/oibus-linux_x64-v${packageInfo.version}.zip`}
  >
    <div>
      <div>{`OIBus v${packageInfo.version}`}</div>
      <div>Linux (x64)</div>
    </div>
  </DownloadButton>
  <DownloadButton
    link={`https://github.com/OptimistikSAS/OIBus/releases/download/v${packageInfo.version}/oibus-linux_arm64-v${packageInfo.version}.zip`}
  >
    <div>
      <div>{`OIBus v${packageInfo.version} (zip)`}</div>
      <div>Linux (ARM 64)</div>
    </div>
  </DownloadButton>
</div>

Alternatively, download and extract the files using these commands:

<CodeBlock language="bash">
  {`curl -LO https://github.com/OptimistikSAS/OIBus/releases/download/v${packageInfo.version}/oibus-linux_arm64-v${packageInfo.version}.zip`}
  {`\r\nunzip -a oibus-linux_arm64-v${packageInfo.version}.zip -d OIBus/`}
</CodeBlock>

:::info Extracted Files
The archive contains:

- `oibus-launcher` – Launcher for the OIBus binary
- `binaries/oibus` – OIBus executable
- `oibus-setup.sh` – Installation script
- `oibus-uninstall.sh` – Uninstallation script (updated during installation)

:::

:::note
The provided bash scripts have been tested on **Ubuntu** and are designed to set up OIBus as a system service. For other distributions, you may need to adapt the script.
:::

## Install OIBus as a Linux Service

1. Unzip the downloaded file into the directory where you want to install OIBus.

2. Run the installation script with administrative privileges:

```bash
sudo ./oibus-setup.sh
```

3. Follow the interactive prompts (default values shown in parentheses):

```
Administrative permissions are required to proceed. Do you wish to continue? (Y/n)
Enter the directory for OIBus binaries (default: ./OIBus/):
Enter the directory for OIBus data, caches, and logs (default: ./OIBusData/):
Enter a username for your OIBus session (default: admin):
Enter a name for your OIBus instance (default: OIBus):
Enter the port for OIBus (default: 2223):
```

4. After successful installation, you'll see:

```
Service file successfully created. Enabling oibus service startup on system boot...
Created symlink /etc/systemd/system/default.target.wants/oibus.service → /etc/systemd/system/oibus.service.
Starting OIBus service...
Installation procedure completed!
```

5. Access OIBus at http://localhost:2223/

6. Useful commands:

```bash
# Check service status
sudo systemctl status oibus

# View service logs
sudo journalctl -u oibus -f
```

Get familiar with the OIBus interface on the [first access page](./first-access.mdx).

## Update OIBus

1. Download the latest version and extract it.
2. Stop the OIBus service.
3. Replace the binary files where it has originally been installed.
4. Restart the OIBus service.

## Uninstall OIBus

1. Navigate to the OIBus binary directory and run:

```bash
sudo ./oibus-uninstall.sh
```

2. Choose whether to remove all data when prompted

:::caution
Selecting to remove all data will permanently delete your configuration, credentials, and logs.
:::

```
Administrative permissions are required to proceed with uninstall. Do you wish to continue ? (Y/n)
Administrative permissions granted.
Do you wish to remove all OIBus data (cache, logs...)? All data, credentials and logs about your current OIBus will be permanently erased. (y/N) y
Removed /etc/systemd/system/default.target.wants/oibus.service.
OIBus service was successfully removed.
```

## Run OIBus in Standalone Mode

To run OIBus without installing as a service:

```bash
./oibus-launcher --config ./OIBusData
```

:::tip
Ensure the `OIBusData` directory exists before running this command.
:::
