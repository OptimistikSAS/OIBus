import ThrottlingSettings from './_throttling-settings.mdx';

# OIAnalytics®

Query time series data from [OIAnalytics®](https://optimistik.com/oianalytics/) SaaS application.

## Connection Settings

### Main Configuration

| Setting                      | Description                                                                                             | Default Value |
| ---------------------------- | ------------------------------------------------------------------------------------------------------- | ------------- |
| Use OIAnalytics registration | Use pre-configured connection settings from [OIAnalytics registration](../installation/oianalytics.mdx) | Enabled       |
| Timeout                      | Duration before connection failure is reported (s)                                                      | 30            |

### Manual Configuration (when registration not used)

| Setting                             | Description                                                                                  |
| ----------------------------------- | -------------------------------------------------------------------------------------------- |
| **Host**                            | Hostname of the OIAnalytics® SaaS application (e.g., `https://optimistik.oianalytics.com`). |
| **Accept unauthorized certificate** | Enable if HTTP queries pass through a firewall that strips certificates.                     |

#### Authentication Methods

| Method                       | Description                                      | Required Parameters                      |
| ---------------------------- | ------------------------------------------------ | ---------------------------------------- |
| **Access key/Secret**        | Standard authentication using access keys.       | Access key, Secret                       |
| **Azure AD (Client Secret)** | Use Azure Active Directory with a client secret. | Tenant ID, Client ID, Client Secret      |
| **Azure AD (Certificate)**   | Use Azure Active Directory with a certificate.   | Tenant ID, Client ID, Certificate, Scope |

#### Proxy Configuration

| Setting            | Description                                                      |
| ------------------ | ---------------------------------------------------------------- |
| **Use proxy**      | Route requests through a proxy.                                  |
| **Proxy URL**      | URL of the proxy server (e.g., `http://proxy.example.com:8080`). |
| **Proxy username** | Username for proxy authentication (if required).                 |
| **Proxy password** | Password for proxy authentication (if required).                 |

<ThrottlingSettings />

## Item Settings

### Endpoint Settings

| Setting  | Description                    | Example Value                  |
| -------- | ------------------------------ | ------------------------------ |
| Endpoint | API endpoint for HTTP requests | `/api/oianalytics/data/values` |

### Query Parameters

**Query Variables**:

- `@StartTime`: Initial execution time, updates to most recent timestamp from results
- `@EndTime`: Current time (`now()`) or sub-interval end when queries are split

:::info Query Splitting
Large time intervals are automatically divided into smaller chunks using:

- **Max read interval** (from [throttling settings](#throttling-settings))
- Reduces server and network load
- Improves data stream resilience
  :::

## CSV Serialization Options

| Setting                | Description                                                              | Example Value             |
| ---------------------- | ------------------------------------------------------------------------ | ------------------------- |
| Filename               | Output filename pattern with variables: `@ConnectorName`, `@CurrentDate` | `data_@ConnectorName.csv` |
| Delimiter              | Field separator character                                                | `,` or `;`                |
| Compression            | Enable gzip compression                                                  | Enabled/Disabled          |
| Output datetime format | Format for datetime fields in CSV                                        | `yyyy-MM-dd HH:mm:ss`     |
| Output timezone        | Timezone for datetime values                                             | `UTC` or `Europe/Paris`   |

:::info Filename Variables

- `@ConnectorName`: Connector name
- `@CurrentDate`: Current timestamp in `yyyy_MM_dd_HH_mm_ss_SSS` format (fixed format)
- Datetime format setting doesn't affect filename timestamp

:::
