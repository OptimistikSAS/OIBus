<div class="modal-header">
  <h4 class="modal-title">Import Array</h4>
</div>
<div class="modal-body">
  <div>
    <div [formGroup]="importForm" class="form-group">
      <div>
        <label class="col form-label" for="delimiter" translate="common.delimiter"></label>
        <select formControlName="delimiter" class="form-select w-50 mb-3" id="delimiter">
          @for (delimiter of csvDelimiters; track delimiter) {
            <option [ngValue]="delimiter" [translate]="'enums.csv-character.' + delimiter"></option>
          }
        </select>
      </div>
      <div>
        <label class="form-label" for="file" translate="common.file"></label>
        <div class="import-drop-zone" (dragover)="onImportDragOver($event)" (drop)="onImportDrop($event)" (click)="fileInput.click()">
          <input #fileInput type="file" accept=".csv" (change)="onImportClick($event)" style="display: none" id="file" />
          <div class="import-drop-zone-content">
            @if (selectedFile === initializeFile) {
              <div class="import-drop-zone-text">
                <span class="fa fa-upload"></span>
                <span translate="common.drop-file-here"></span>
              </div>
            } @else {
              <div class="import-drop-zone-text">
                <span class="fa fa-file"></span>
                <span>{{ selectedFile.name }}</span>
              </div>
            }
          </div>
        </div>
        @if (validationError) {
          <div class="text-danger mt-2">{{ validationError }}</div>
        }
        @if (validationErrors.length > 0) {
          <div class="alert alert-danger mt-2" role="alert">
            <h6>
              <i class="fa fa-solid fa-exclamation-triangle me-2"></i>
              <span>Import validation errors</span>
            </h6>
            @for (error of validationErrors; track error) {
              <div class="mt-1">
                <strong>Row {{ $index + 1 }}:</strong> {{ error.error }}
              </div>
            }
          </div>
        }
      </div>
    </div>
  </div>
</div>
<div class="modal-footer">
  <div class="btn-group">
    <button type="button" class="btn btn-primary" (click)="save()" [disabled]="!canSave" translate="common.save" id="save-button"></button>
    <button type="button" class="btn btn-cancel" (click)="cancel()" translate="common.cancel" id="cancel-button"></button>
  </div>
</div>
