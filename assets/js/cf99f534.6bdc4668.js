"use strict";(self.webpackChunkdoc_oibus=self.webpackChunkdoc_oibus||[]).push([[4188],{4897:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>l,frontMatter:()=>i,metadata:()=>r,toc:()=>h});var s=t(4848),o=t(8453);const i={sidebar_position:2},a="OIBus to OIBus communication",r={id:"guide/advanced/oibus-to-oibus",title:"OIBus to OIBus communication",description:"Context",source:"@site/docs/guide/advanced/oibus-to-oibus.md",sourceDirName:"guide/advanced",slug:"/guide/advanced/oibus-to-oibus",permalink:"/docs/guide/advanced/oibus-to-oibus",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"guideSidebar",previous:{title:"OIBus security",permalink:"/docs/guide/advanced/oibus-security"},next:{title:"Data rate estimation and cache sizing",permalink:"/docs/guide/advanced/oibus-data-rate"}},c={},h=[{value:"Context",id:"context",level:2},{value:"Data stream set-up",id:"data-stream-set-up",level:2},{value:"Set up a North connector OIConnect in OIBus1",id:"set-up-a-north-connector-oiconnect-in-oibus1",level:3},{value:"Set up an External source in OIBus2",id:"set-up-an-external-source-in-oibus2",level:3},{value:"Logs",id:"logs",level:2},{value:"Loki through another OIBus",id:"loki-through-another-oibus",level:3}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"oibus-to-oibus-communication",children:"OIBus to OIBus communication"}),"\n",(0,s.jsx)(n.h2,{id:"context",children:"Context"}),"\n",(0,s.jsx)(n.p,{children:"Often, PLCs are exclusively reachable within a restricted network known as the Operational Technology (OT) domain which\noften coexists either within or adjacent to another network, the Information Technology (IT) domain, with datacenters and\ncloud systems. OT machines, for security reasons, don't have access to internet. OIBus may need an internet access. There\nare two viable approaches for accessing data within these networks:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Install OIBus in the IT domain, and allow connections of PLCs in OT from the OIBus Machine. In this approach, you permit\nconnections to each data source from the OIBus machine, which resides in the IT (external to the OT) through the firewall."}),"\n",(0,s.jsx)(n.li,{children:"Installing OIBus in both networks: The second option involves setting up one instance of OIBus within the OT and another\nwithin the IT. This enables the management of a single communication link between the two networks."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The first option is acceptable when you have only one machine available for OIBus installation, but it entails a more\ncomplex network configuration and carries the risk of exposing your machines to potential security threats. The second\noption is a preferable choice. With this approach, the initial OIBus instance in the OT, referred to as OIBus1, can\naccess machines within the same network and transmit data to the office network via a single firewall-permitted connection\n(from OIBus1 to OIBus2)."}),"\n",(0,s.jsx)(n.p,{children:"Let's delve into the details of setting up this communication method."}),"\n",(0,s.jsx)(n.h2,{id:"data-stream-set-up",children:"Data stream set-up"}),"\n",(0,s.jsx)(n.h3,{id:"set-up-a-north-connector-oiconnect-in-oibus1",children:"Set up a North connector OIConnect in OIBus1"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/docs/guide/north-connectors/oibus",children:"OIBus North connector"})," proves highly valuable when one OIBus instance lacks direct internet\naccess, often due to isolation within an industrial network. However, it can establish communication with another OIBus\nlocated in a different network that does have internet access."]}),"\n",(0,s.jsxs)(n.p,{children:["For instance, the host address might take the form of ",(0,s.jsx)(n.a,{href:"http://1.2.3.4:2223",children:"http://1.2.3.4:2223"}),", (IP address and port of OIBus2). It's crucial\nto ensure that remote connections are authorized in the settings of the second OIBus Engine, specifically within the\n",(0,s.jsx)(n.a,{href:"/docs/guide/engine/ip-filters",children:"IP Filter section"}),". Additionally, the appropriate username and password should be utilized. In\nthis case, the OIBus default username and password (admin and pass) should be employed for authentication purposes."]}),"\n",(0,s.jsx)(n.h3,{id:"set-up-an-external-source-in-oibus2",children:"Set up an External source in OIBus2"}),"\n",(0,s.jsxs)(n.p,{children:["On OIBus2, you must now define an ",(0,s.jsx)(n.a,{href:"/docs/guide/engine/external-sources",children:"External Source"}),". If no external source is set in OIBus2,\ndata sent by OIBus1 to OIBus2 will be discarded."]}),"\n",(0,s.jsxs)(n.p,{children:["The name of this external source should adhere to the syntax of the name query param, for instance, ",(0,s.jsx)(n.code,{children:"MyOIBus:MyOIConnect"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"With the external source defined, the North connector of OIBus2 can then proceed to subscribe to this specific external source,\nenabling the exchange of data between the two OIBus instances."}),"\n",(0,s.jsx)(n.h2,{id:"logs",children:"Logs"}),"\n",(0,s.jsx)(n.h3,{id:"loki-through-another-oibus",children:"Loki through another OIBus"}),"\n",(0,s.jsxs)(n.p,{children:["To transmit logs to OIBus2 from OIBus1, navigate to the ",(0,s.jsx)(n.a,{href:"/docs/guide/engine/engine-settings",children:"Engine page"})," within the ",(0,s.jsx)(n.em,{children:"Loki logs"}),"\nsection and specify OIBus2's address in the ",(0,s.jsx)(n.strong,{children:"Host"})," field, along with its associated endpoint: ",(0,s.jsx)(n.a,{href:"http://1.2.3.4:2223/logs",children:"http://1.2.3.4:2223/logs"}),".\nIt's important to note that OIBus2 utilizes Basic Authentication. Keep the token address field empty and provide the username\nand password credentials used to connect to OIBus2."]}),"\n",(0,s.jsxs)(n.p,{children:["In cases where the loki level is set to ",(0,s.jsx)(n.strong,{children:"info"})," in OIBus1, only logs with ",(0,s.jsx)(n.strong,{children:"info"})," level and above will be forwarded to\nOIBus2."]}),"\n",(0,s.jsxs)(n.p,{children:["In OIBus2, if the console and file levels are configured to ",(0,s.jsx)(n.strong,{children:"error"})," only logs with ",(0,s.jsx)(n.strong,{children:"error"})," level or higher will be\nrecorded in the console and file. However, if the loki level in OIBus2 is also set to ",(0,s.jsx)(n.strong,{children:"info"})," all the logs received\nfrom OIBus1 will be sent to this loki endpoint (set in OIBus2)."]})]})}function l(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var s=t(6540);const o={},i=s.createContext(o);function a(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);