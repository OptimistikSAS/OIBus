"use strict";(globalThis.webpackChunkdoc_oibus=globalThis.webpackChunkdoc_oibus||[]).push([[5772],{28453:(e,i,t)=>{t.d(i,{R:()=>r,x:()=>l});var n=t(96540);const s={},d=n.createContext(s);function r(e){const i=n.useContext(d);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(d.Provider,{value:i},e.children)}},63740:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>c,contentTitle:()=>l,default:()=>a,frontMatter:()=>r,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"guide/south-connectors/mqtt","title":"MQTT","description":"MQTT (Message Queuing Telemetry Transport) is a lightweight protocol designed for real-time messaging using a","source":"@site/docs/guide/south-connectors/mqtt.md","sourceDirName":"guide/south-connectors","slug":"/guide/south-connectors/mqtt","permalink":"/docs/guide/south-connectors/mqtt","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"guideSidebar","previous":{"title":"Modbus","permalink":"/docs/guide/south-connectors/modbus"},"next":{"title":"Microsoft SQL Server\u2122","permalink":"/docs/guide/south-connectors/mssql"}}');var s=t(74848),d=t(28453);const r={},l="MQTT",c={},h=[{value:"Specific Settings",id:"specific-settings",level:2},{value:"Connection",id:"connection",level:3},{value:"Quality of Service",id:"quality-of-service",level:3},{value:"Authentication",id:"authentication",level:3},{value:"No Authentication",id:"no-authentication",level:4},{value:"Username / Password",id:"username--password",level:4},{value:"Certificate Authentication",id:"certificate-authentication",level:4},{value:"Data Throttling",id:"data-throttling",level:3},{value:"Item Settings",id:"item-settings",level:2},{value:"Topic Subscription",id:"topic-subscription",level:3},{value:"Payload Configuration",id:"payload-configuration",level:3},{value:"Basic Settings",id:"basic-settings",level:4},{value:"Value Extraction",id:"value-extraction",level:4},{value:"Timestamp Configuration",id:"timestamp-configuration",level:4},{value:"Payload Examples",id:"payload-examples",level:3},{value:"Single Object",id:"single-object",level:4},{value:"Array of Objects",id:"array-of-objects",level:4},{value:"Additional Fields",id:"additional-fields",level:4}];function o(e){const i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"mqtt",children:"MQTT"})}),"\n",(0,s.jsxs)(i.p,{children:["MQTT (Message Queuing Telemetry Transport) is a lightweight protocol designed for real-time messaging using a\npublish/subscribe model. OIBus acts as an MQTT client using the ",(0,s.jsx)(i.a,{href:"https://github.com/mqttjs/MQTT.js",children:"MQTT.js"})," library to\ninteract with MQTT brokers."]}),"\n",(0,s.jsx)(i.h2,{id:"specific-settings",children:"Specific Settings"}),"\n",(0,s.jsx)(i.h3,{id:"connection",children:"Connection"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Setting"}),(0,s.jsx)(i.th,{children:"Description"}),(0,s.jsx)(i.th,{children:"Example Value"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"URL"}),(0,s.jsxs)(i.td,{children:["Address of the MQTT broker (format: ",(0,s.jsx)(i.code,{children:"mqtt://address:port"}),"). Default port is ",(0,s.jsx)(i.code,{children:"1883"}),"."]}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"mqtt://broker.example.com:1883"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Reconnect period"}),(0,s.jsx)(i.td,{children:"Time (in milliseconds) to wait before reconnection attempts"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"5000"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Connect timeout"}),(0,s.jsx)(i.td,{children:"Maximum time (in milliseconds) to wait for connection establishment"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"30000"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Reject unauthorized"}),(0,s.jsx)(i.td,{children:"Reject connections with unverified certificates (e.g., self-signed)"}),(0,s.jsx)(i.td,{children:"Enabled/Disabled"})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"quality-of-service",children:"Quality of Service"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"QoS Level"}),(0,s.jsx)(i.th,{children:"Description"}),(0,s.jsx)(i.th,{children:"Example Use Case"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"0"}),(0,s.jsx)(i.td,{children:"At most once (no guarantee of delivery)"}),(0,s.jsx)(i.td,{children:"Sensor data with high frequency updates"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"1"}),(0,s.jsx)(i.td,{children:"At least once (guaranteed delivery, possible duplicates)"}),(0,s.jsx)(i.td,{children:"Important notifications"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"2"}),(0,s.jsx)(i.td,{children:"Exactly once (guaranteed single delivery)"}),(0,s.jsx)(i.td,{children:"Critical commands"})]})]})]}),"\n",(0,s.jsx)(i.admonition,{title:"Persistence",type:"info",children:(0,s.jsx)(i.p,{children:"QoS levels 1 and 2 support persistent connections, allowing the broker to retain messages for clients that reconnect after disconnection."})}),"\n",(0,s.jsx)(i.h3,{id:"authentication",children:"Authentication"}),"\n",(0,s.jsx)(i.h4,{id:"no-authentication",children:"No Authentication"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Setting"}),(0,s.jsx)(i.th,{children:"Description"}),(0,s.jsx)(i.th,{children:"Example Value"})]})}),(0,s.jsx)(i.tbody,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"(None)"}),(0,s.jsx)(i.td,{children:"No authentication required for connection"}),(0,s.jsx)(i.td,{children:"-"})]})})]}),"\n",(0,s.jsx)(i.h4,{id:"username--password",children:"Username / Password"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Setting"}),(0,s.jsx)(i.th,{children:"Description"}),(0,s.jsx)(i.th,{children:"Example Value"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Username"}),(0,s.jsx)(i.td,{children:"Username for broker authentication"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"mqtt_user"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Password"}),(0,s.jsx)(i.td,{children:"Password for broker authentication"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})})]})]})]}),"\n",(0,s.jsx)(i.h4,{id:"certificate-authentication",children:"Certificate Authentication"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Setting"}),(0,s.jsx)(i.th,{children:"Description"}),(0,s.jsx)(i.th,{children:"Example Value"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Cert file path"}),(0,s.jsx)(i.td,{children:"Path to the signed certificate file"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"/path/to/cert.pem"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Key file path"}),(0,s.jsx)(i.td,{children:"Path to the private key file"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"/path/to/key.pem"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"CA file path"}),(0,s.jsx)(i.td,{children:"Path to the certificate authority file. Leave empty for self-signed certs."}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"/path/to/ca.pem"})})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"data-throttling",children:"Data Throttling"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Setting"}),(0,s.jsx)(i.th,{children:"Description"}),(0,s.jsx)(i.th,{children:"Example Value"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Number of messages before flush"}),(0,s.jsx)(i.td,{children:"Number of messages to accumulate before flushing to North caches"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"1000"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Delay between flush"}),(0,s.jsx)(i.td,{children:"Time delay (in milliseconds) between automatic flushes of accumulated messages"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"1000"})})]})]})]}),"\n",(0,s.jsx)(i.h2,{id:"item-settings",children:"Item Settings"}),"\n",(0,s.jsx)(i.h3,{id:"topic-subscription",children:"Topic Subscription"}),"\n",(0,s.jsx)(i.p,{children:"MQTT uses a hierarchical topic structure with wildcard support:"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Wildcard"}),(0,s.jsx)(i.th,{children:"Description"}),(0,s.jsx)(i.th,{children:"Example"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"#"})}),(0,s.jsx)(i.td,{children:"Multi-level wildcard"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"sensors/#"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"+"})}),(0,s.jsx)(i.td,{children:"Single-level wildcard"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"sensors/+/temperature"})})]})]})]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Example Topic Structure:"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["root/","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["location1/","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"sensor1"}),"\n",(0,s.jsx)(i.li,{children:"sensor2"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["location2/","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"sensor1"}),"\n",(0,s.jsx)(i.li,{children:"sensor2"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"payload-configuration",children:"Payload Configuration"}),"\n",(0,s.jsx)(i.h4,{id:"basic-settings",children:"Basic Settings"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Setting"}),(0,s.jsx)(i.th,{children:"Description"}),(0,s.jsx)(i.th,{children:"Example Value"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Payload in array"}),(0,s.jsx)(i.td,{children:"Whether payload contains an array of values"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"false"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Point ID origin"}),(0,s.jsxs)(i.td,{children:["Source of point ID (",(0,s.jsx)(i.code,{children:"payload"})," or ",(0,s.jsx)(i.code,{children:"oibus"}),")"]}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"payload"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Timestamp origin"}),(0,s.jsxs)(i.td,{children:["Source of timestamp (",(0,s.jsx)(i.code,{children:"payload"})," or ",(0,s.jsx)(i.code,{children:"oibus"}),")"]}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"payload"})})]})]})]}),"\n",(0,s.jsx)(i.h4,{id:"value-extraction",children:"Value Extraction"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Setting"}),(0,s.jsx)(i.th,{children:"Description"}),(0,s.jsx)(i.th,{children:"Example Value"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Value path"}),(0,s.jsx)(i.td,{children:"JSON path to the value"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"value"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Point ID path"}),(0,s.jsx)(i.td,{children:"JSON path to point ID (required if from payload)"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"pointId"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Array path"}),(0,s.jsx)(i.td,{children:"JSON path to array (if payload is array)"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"metrics"})})]})]})]}),"\n",(0,s.jsx)(i.h4,{id:"timestamp-configuration",children:"Timestamp Configuration"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Setting"}),(0,s.jsx)(i.th,{children:"Description"}),(0,s.jsx)(i.th,{children:"Example Value"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Timestamp path"}),(0,s.jsx)(i.td,{children:"JSON path to timestamp"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"timestamp"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Type"}),(0,s.jsx)(i.td,{children:"Timestamp data type"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"ISO8601"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Timezone"}),(0,s.jsx)(i.td,{children:"Timezone for string timestamps"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"UTC"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Timestamp format"}),(0,s.jsx)(i.td,{children:"Format for string timestamps"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"yyyy-MM-dd HH:mm:ss"})})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"payload-examples",children:"Payload Examples"}),"\n",(0,s.jsx)(i.h4,{id:"single-object",children:"Single Object"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",children:'{\n  "pointId": "temperature1",\n  "value": 23.5,\n  "timestamp": "2023-01-01T12:00:00Z",\n  "quality": "good"\n}\n'})}),"\n",(0,s.jsx)(i.h4,{id:"array-of-objects",children:"Array of Objects"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",children:'{\n  "readings": [\n    {\n      "id": "temp1",\n      "value": 22.0,\n      "time": "2023-01-01T12:00:00Z"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(i.h4,{id:"additional-fields",children:"Additional Fields"}),"\n",(0,s.jsx)(i.p,{children:"To add extra fields from payload:"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Setting"}),(0,s.jsx)(i.th,{children:"Description"}),(0,s.jsx)(i.th,{children:"Example Value"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Output field name"}),(0,s.jsx)(i.td,{children:"Name for additional field"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"quality"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Payload path"}),(0,s.jsx)(i.td,{children:"JSON path to field in payload"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"quality"})})]})]})]})]})}function a(e={}){const{wrapper:i}={...(0,d.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);