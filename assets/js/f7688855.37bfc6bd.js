"use strict";(globalThis.webpackChunkdoc_oibus=globalThis.webpackChunkdoc_oibus||[]).push([[6038],{28453:(e,i,n)=>{n.d(i,{R:()=>o,x:()=>l});var r=n(96540);const s={},t=r.createContext(s);function o(e){const i=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(t.Provider,{value:i},e.children)}},76917:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"guide/history-queries","title":"History Queries","description":"OIBus enables both real-time data streaming and historical data retrieval, allowing access to information from periods before your streaming setup was active.","source":"@site/docs/guide/history-queries.md","sourceDirName":"guide","slug":"/guide/history-queries","permalink":"/docs/guide/history-queries","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"guideSidebar","previous":{"title":"SQLite\u2122","permalink":"/docs/guide/south-connectors/sqlite"},"next":{"title":"Advanced","permalink":"/docs/category/advanced"}}');var s=n(74848),t=n(28453);const o={sidebar_position:6},l="History Queries",a={},c=[{value:"Create a History Query",id:"create-a-history-query",level:2},{value:"Setup Options",id:"setup-options",level:3},{value:"History Query Main Settings",id:"history-query-main-settings",level:2},{value:"Time Configuration",id:"time-configuration",level:3},{value:"Resilience Features",id:"resilience-features",level:2},{value:"Automatic Recovery",id:"automatic-recovery",level:3},{value:"Item Grouping",id:"item-grouping",level:3},{value:"Running a Query",id:"running-a-query",level:2},{value:"Execution Controls",id:"execution-controls",level:3},{value:"Monitoring",id:"monitoring",level:3}];function d(e){const i={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"history-queries",children:"History Queries"})}),"\n",(0,s.jsx)(i.p,{children:"OIBus enables both real-time data streaming and historical data retrieval, allowing access to information from periods before your streaming setup was active."}),"\n",(0,s.jsx)(i.h2,{id:"create-a-history-query",children:"Create a History Query"}),"\n",(0,s.jsx)(i.h3,{id:"setup-options",children:"Setup Options"}),"\n",(0,s.jsx)(i.p,{children:"You can create history queries using:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"New South/North connectors"})," specifically for historical retrieval"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Existing South/North connectors"})," (all items will be copied)"]}),"\n"]}),"\n",(0,s.jsxs)(i.admonition,{title:"Compatible Connectors",type:"info",children:[(0,s.jsx)(i.p,{children:"Only South connectors with historian capabilities support history queries, including:"}),(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"OPC UA (HA mode)"}),"\n",(0,s.jsx)(i.li,{children:"OPC Classic (HDA mode)"}),"\n",(0,s.jsx)(i.li,{children:"MSSQL/SQL Server"}),"\n",(0,s.jsx)(i.li,{children:"PostgreSQL"}),"\n",(0,s.jsx)(i.li,{children:"Oracle"}),"\n",(0,s.jsx)(i.li,{children:"OSIsoft PI System\u2122"}),"\n",(0,s.jsx)(i.li,{children:"Other temporal database connectors"}),"\n"]})]}),"\n",(0,s.jsx)(i.h2,{id:"history-query-main-settings",children:"History Query Main Settings"}),"\n",(0,s.jsx)(i.h3,{id:"time-configuration",children:"Time Configuration"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Start Time"}),": Beginning of historical period (required)"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"End Time"}),": End of historical period (required)"]}),"\n"]}),"\n",(0,s.jsxs)(i.admonition,{title:"SQL Connectors Requirement",type:"caution",children:[(0,s.jsx)(i.p,{children:"For SQL-based connectors, you MUST include both time variables in your queries:"}),(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-sql",children:"SELECT * FROM sensor_data\nWHERE timestamp > @StartTime\nAND timestamp <= @EndTime\n"})})]}),"\n",(0,s.jsx)(i.h2,{id:"resilience-features",children:"Resilience Features"}),"\n",(0,s.jsx)(i.h3,{id:"automatic-recovery",children:"Automatic Recovery"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Tracks maximum retrieved timestamp in local cache"}),"\n",(0,s.jsx)(i.li,{children:"Resumes from last position after connection failures"}),"\n",(0,s.jsx)(i.li,{children:"Maintains progress across restarts"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"item-grouping",children:"Item Grouping"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Default"}),": Items share the same maximum instant (better performance)"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Max instant per item"}),": Tracks each item separately (more precise)"]}),"\n"]}),"\n",(0,s.jsxs)(i.admonition,{title:"When to Use Per-Item Tracking (OPCUA, OPC, PI)",type:"tip",children:[(0,s.jsx)(i.p,{children:'Use "Max instant per item" when:'}),(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Data points update at different frequencies"}),"\n",(0,s.jsx)(i.li,{children:"Source system doesn't guarantee synchronous writes"}),"\n",(0,s.jsx)(i.li,{children:"You need individual progress tracking for each item"}),"\n"]}),(0,s.jsx)(i.p,{children:"Note: This creates separate queries per item which may increase server load"})]}),"\n",(0,s.jsx)(i.h2,{id:"running-a-query",children:"Running a Query"}),"\n",(0,s.jsx)(i.h3,{id:"execution-controls",children:"Execution Controls"}),"\n",(0,s.jsx)(i.p,{children:"Start or pause queries from:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Editing page"}),"\n",(0,s.jsx)(i.li,{children:"List page"}),"\n",(0,s.jsx)(i.li,{children:"Display page"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"monitoring",children:"Monitoring"}),"\n",(0,s.jsx)(i.p,{children:"The display page shows:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Current progress"}),"\n",(0,s.jsx)(i.li,{children:"Query status"}),"\n",(0,s.jsx)(i.li,{children:"Items processed"}),"\n",(0,s.jsx)(i.li,{children:"Estimated completion"}),"\n"]}),"\n",(0,s.jsxs)(i.admonition,{title:"Important Note",type:"caution",children:[(0,s.jsx)(i.p,{children:"Any modifications to:"}),(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Added/removed items"}),"\n",(0,s.jsx)(i.li,{children:"Updated configurations"}),"\n",(0,s.jsx)(i.li,{children:"Time range changes"}),"\n"]}),(0,s.jsx)(i.p,{children:"will restart the query from the original start time."})]})]})}function u(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);