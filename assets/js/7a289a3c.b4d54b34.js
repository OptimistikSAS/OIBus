"use strict";(self.webpackChunkdoc_oibus=self.webpackChunkdoc_oibus||[]).push([[8957],{9959:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var o=t(4848),s=t(8453);const i={sidebar_position:5},r="OPCHDA (Windows only)",a={id:"guide/south-connectors/opchda",title:"OPCHDA (Windows only)",description:"OPCDA and OPCHDA are communication protocols used in the industrial world and developed by the",source:"@site/versioned_docs/version-v2/guide/south-connectors/opchda.md",sourceDirName:"guide/south-connectors",slug:"/guide/south-connectors/opchda",permalink:"/docs/v2/guide/south-connectors/opchda",draft:!1,unlisted:!1,tags:[],version:"v2",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"guideSidebar",previous:{title:"OPCUA",permalink:"/docs/v2/guide/south-connectors/opcua"},next:{title:"Modbus",permalink:"/docs/v2/guide/south-connectors/modbus"}},d={},c=[{value:"OPCHDA connector",id:"opchda-connector",level:2},{value:"HDA Agent section",id:"hda-agent-section",level:3},{value:"Connection and network",id:"connection-and-network",level:3},{value:"Accessing data",id:"accessing-data",level:3},{value:"Scan groups",id:"scan-groups",level:4},{value:"Points and nodes",id:"points-and-nodes",level:4}];function l(e){const n={a:"a",admonition:"admonition",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"opchda-windows-only",children:"OPCHDA (Windows only)"}),"\n",(0,o.jsxs)(n.p,{children:["OPCDA and OPCHDA are communication protocols used in the industrial world and developed by the\n",(0,o.jsx)(n.a,{href:"https://opcfoundation.org/",children:"OPC Foundation"}),". This technology has been replaced by OPCUA but is still widely used in\nthe industry. To use OPCUA in OIBus, see the ",(0,o.jsx)(n.a,{href:"/docs/v2/guide/south-connectors/opcua",children:"OPCUA connector documentation"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"An HDA server allows to retrieve the history of data over a more or less long period, while a DA server allows to\nretrieve only the most recent value of a tag."}),"\n",(0,o.jsxs)(n.p,{children:["Only OPCHDA is supported by OIBus. OIBus uses an HDA agent, i.e. a module integrated to OIBus, but available in\nstandalone, to perform OPC history extractions in command line. See the\n",(0,o.jsx)(n.a,{href:"/docs/v2/guide/advanced/opchda-agent",children:"OPCHDA agent documentation"})," to use the agent in standalone."]}),"\n",(0,o.jsxs)(n.p,{children:["Both the OPCHDA connector and the standalone agent are available under Windows only and use Microsoft\u2019s proprietary DCOM\ntechnology to transfer information over the network. This technology is much more complex to set up than traditional TCP\ncommunications. A dedicated guide is offered ",(0,o.jsx)(n.a,{href:"/docs/v2/guide/advanced/opchda-dcom",children:"here"})," to correctly setup HDA communications\nwith COM/DCOM interfaces."]}),"\n",(0,o.jsx)(n.h2,{id:"opchda-connector",children:"OPCHDA connector"}),"\n",(0,o.jsxs)(n.p,{children:["OIBus uses a HDA agent, compiled for Windows platforms, to interact with COM/DCOM interfaces. The HDA agent can also be\nused ",(0,o.jsx)(n.a,{href:"/docs/v2/guide/advanced/opchda-agent",children:"in standalone"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"hda-agent-section",children:"HDA Agent section"}),"\n",(0,o.jsx)(n.p,{children:"OIBus exchanges commands and data with the HDA agent through a TCP server/client communication. Therefore, several\nfields must be filled to make OIBus communicate with the HDA Agent:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Agent filename"}),": the file path of the HDA Agent. By default, the HDA agent is in the same folder as the OIBus binary."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"TCP port"}),": the TCP port that the HDA Agent will use to create its own TCP server. If you need two OPCHDA connectors,\nbe careful to have two distinct TCP ports to avoid conflicts."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Logging level"}),": the level of log the HDA Agent will use. If the HDA agent log level is lower than the OIBus log levels,\nthe lowest logs will be lost. See the ",(0,o.jsx)(n.a,{href:"/docs/v2/guide/engine/logging-parameters",children:"Engine log section"})," to know more about logging parameters."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"connection-and-network",children:"Connection and network"}),"\n",(0,o.jsx)(n.p,{children:"Some information are required to connect to the OPCHDA server:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Host"}),": the hostname or its IP address"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Server name"}),": the name of the OPCHDA server"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Several options are available to better manage network failure or inactivity:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Retry interval"}),": in case of connection failure, time to wait before reconnecting (in ms)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Max read interval"}),": split the request interval into smaller chunks (in s)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Read interval delay"}),": time to wait (in ms) between two sub-intervals in case a split occurs (ignored otherwise)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Max return values"}),": max number of values to retrieve ",(0,o.jsx)(n.strong,{children:"per node"}),". If 100 nodes are requested, this value is\nmultiplied by 100 to have the total number of values retrieved."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"accessing-data",children:"Accessing data"}),"\n",(0,o.jsx)(n.h4,{id:"scan-groups",children:"Scan groups"}),"\n",(0,o.jsxs)(n.p,{children:["OIBus retrieves data by intervals. It is then possible to aggregate these values or to resample them. To do so, a scan\nmode must be selected (to create additional scan modes, see ",(0,o.jsx)(n.a,{href:"/docs/v2/guide/engine/scan-modes",children:"Engine settings"}),"), with its\nassociated aggregate and resampling options."]}),"\n",(0,o.jsx)(n.admonition,{title:"Creating scan groups",type:"info",children:(0,o.jsxs)(n.p,{children:["Creating scan groups is mandatory to choose them in the ",(0,o.jsx)(n.em,{children:"Points"})," section when adding new points to request."]})}),"\n",(0,o.jsx)(n.admonition,{title:"Compatibility with the OPCUA server",type:"danger",children:(0,o.jsxs)(n.p,{children:["Not every aggregate and resampling are supported by OPCUA server. ",(0,o.jsx)(n.em,{children:"Raw"})," aggregate and ",(0,o.jsx)(n.em,{children:"None"})," resampling are preferred to\navoid compatibility issues."]})}),"\n",(0,o.jsx)(n.h4,{id:"points-and-nodes",children:"Points and nodes"}),"\n",(0,o.jsxs)(n.p,{children:["The OPCHDA connector retrieves values from specific addresses. Addresses (called node ID, or just node) are organized in\nnamespaces, in a tree-like structure. These can be added in the ",(0,o.jsx)(n.em,{children:"Points section"})," (in the upper right corner)."]}),"\n",(0,o.jsx)(n.p,{children:"To request a data, specify the following fields:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Point ID"}),"\n",(0,o.jsx)(n.li,{children:"Node ID"}),"\n",(0,o.jsx)(n.li,{children:"Scan group"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"The Node ID matches the path of the data in the appropriate namespace in the OPCHDA server. The point ID will be used\nwhen sent to North connectors. It can be the same as the Node ID, but it allows friendlier names to manage."})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var o=t(6540);const s={},i=o.createContext(s);function r(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);